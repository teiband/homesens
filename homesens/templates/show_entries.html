<head>
<script>
//document.getElementById("spans").onchange = function() {selectSpan()};

function selectSpan() {
  const spans = ['day', 'week', 'month', 'year'];
  for (var i = 0; i < spans.length; i++)
  {
    console.log(spans[i]);
    elem = document.getElementById(spans[i]);
    console.log(elem);
    elem.hidden = true;
  }
  var x = document.getElementById("spans");
  span = x.value;
  console.log(span)
  var elem = document.getElementById(span);
  elem.hidden = false;
}
</script>
<script type="text/javascript" src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

{% extends "layout.html" %}
{% block body %}
  {% if session.logged_in %}
    <form action="{{ url_for('add_entry') }}" method=post class=add-entry>
      <dl>
        <dt>Title:
        <dd><input type=text size=30 name=temperature>
        <dt>Text:
        <dd><textarea name=pressure rows=5 cols=40></textarea>
        <dd><input type=submit value=Share>
      </dl>
    </form>
  {% endif %}

 <label for="spans">Choose a time-span:</label>

    <select name="spans" id="spans" onchange="selectSpan()">
      <option value="day">Day</option>
      <option value="week">Week</option>
      <option value="month">Month</option>
      <option value="year">Year</option>
    </select>

<div id="day">
    <p>Day</p>
    {{ html_figs['day']['temp'] | safe }}
    {{ html_figs['day']['press'] | safe }}
    {{ html_figs['day']['humid'] | safe }}
</div>
<div id="week" display="none" hidden="true">
    <p>Week</p>
    {{ html_figs['week']['temp'] | safe }}
    {{ html_figs['week']['press'] | safe }}
    {{ html_figs['week']['humid'] | safe }}
</div>
<div id="month" hidden="true">
    <p>Month</p>
    {{ html_figs['month']['temp'] | safe }}
    {{ html_figs['month']['press'] | safe }}
    {{ html_figs['month']['humid'] | safe }}
</div>
<div id="year" hidden="true">
    <p>Year</p>
    {{ html_figs['year']['temp'] | safe }}
    {{ html_figs['year']['press'] | safe }}
    {{ html_figs['year']['humid'] | safe }}

</div>
  <table id=nice_table>
	<TR>
		<th>Time</th>
		<th>Temp.</th>
		<th>Press.</th>
		<th>Humid.</th>
	<TR>
	{% for entry in entries %}
	<TR>
	   <TD class="c1">{{ entry[0] }}</TD>
	   <TD class="c2">{{ "%.2f"|format(entry[1]) }}</TD>
	   <TD class="c3">{{ "%.2f"|format(entry[2]) }}</TD>
	   <TD class="c4">{{ "%.2f"|format(entry[3]) }}</TD>
	</TR>
	{% else %}
    <TR>Unbelievable. No entries here so far</TR>
	{% endfor %}
  </table>
	  
{% endblock %}
